"use strict";(self.webpackChunkvidactiva=self.webpackChunkvidactiva||[]).push([[163],{4163:(Le,b,l)=>{l.r(b),l.d(b,{UsersModule:()=>Ye});var d=l(6895),u=l(5197),Z=l(5226),c=l.n(Z),e=l(1571),f=l(4961),a=l(4006);const y=["myForm"];function U(t,o){1&t&&(e.TgZ(0,"span",27),e._uU(1," Username is not Valid "),e.qZA())}function x(t,o){1&t&&(e.TgZ(0,"span",27),e._uU(1," Password is not Valid "),e.qZA())}const T=function(){return["/user/register"]};let C=(()=>{class t{constructor(r,n){this.service=r,this.route=n,this.isValid=!1,this.password=""}ngOnInit(){}notValid(r){return this.myForm?.controls[r]?.invalid&&this.myForm?.controls[r]?.touched}validatePasswordModerate(){return this.isValid=!/(?=(.*[0-9]))((?=.*[A-Za-z0-9])(?=.*[A-Z])(?=.*[a-z]))^.{8,}$/.test(this.password)&&!this.myForm?.controls.password?.pristine,this.isValid}save(){this.service.login(this.myForm?.controls.username.value,this.myForm?.controls.password.value).subscribe(r=>{r?(c().fire("Good job!","You logged correctly!","success").then(()=>{window.location.reload()}),this.route.navigate(["/"])):c().fire({icon:"error",title:"Oops...",text:"Something went wrong!"}),this.myForm.resetForm()})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(f.f),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],viewQuery:function(r,n){if(1&r&&e.Gf(y,5),2&r){let i;e.iGM(i=e.CRH())&&(n.myForm=i.first)}},decls:39,vars:6,consts:[[1,"vh-100",2,"background-color","#111010"],[1,"container","py-5","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col","col-xl-10"],[1,"card",2,"border-radius","1rem"],[1,"row","g-0"],[1,"col-md-6","col-lg-5","d-none","d-md-block"],["src","https://res.cloudinary.com/df7eewfeo/image/upload/v1676498678/login_vnvig4.jpg","alt","login form","id","imagen",1,"img-fluid",2,"border-radius","1rem 0 0 1rem"],[1,"col-md-6","col-lg-7","d-flex","align-items-center"],[1,"card-body","p-4","p-lg-5","text-black"],["autocomplete","off",3,"ngSubmit"],["myForm","ngForm"],[1,"d-flex","align-items-center","mb-3","pb-1"],["aria-hidden","true",1,"fa","fa-trophy","fa-2x"],[1,"h1","fw-bold","mb-0"],[1,"fw-normal","mb-3","pb-3",2,"letter-spacing","1px"],[1,"form-outline","mb-4"],["type","text","id","username","name","username","minlength","3",1,"form-control","form-control-lg",3,"ngModel"],["for","form2Example17",1,"form-label"],["class","form-text text-danger",4,"ngIf"],["type","password","id","password","name","password",1,"form-control","form-control-lg",3,"ngModel","keyup","ngModelChange"],["for","form2Example27",1,"form-label"],[1,"pt-1","mb-4"],["type","submit",1,"btn","btn-dark","btn-lg","btn-block",3,"disabled"],[1,"mb-5","pb-lg-2",2,"color","#393f81"],[2,"color","#393f81",3,"routerLink"],["href","#!",1,"small","text-muted"],[1,"form-text","text-danger"]],template:function(r,n){if(1&r&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e._UZ(7,"img",7),e.qZA(),e.TgZ(8,"div",8)(9,"div",9)(10,"form",10,11),e.NdJ("ngSubmit",function(){return n.save()}),e.TgZ(12,"div",12),e._UZ(13,"i",13),e.TgZ(14,"span",14),e._uU(15,"Vidactiva"),e.qZA()(),e.TgZ(16,"h5",15),e._uU(17,"Sign into your account"),e.qZA(),e.TgZ(18,"div",16),e._UZ(19,"input",17),e.TgZ(20,"label",18),e._uU(21,"Username"),e.qZA(),e.YNc(22,U,2,0,"span",19),e.qZA(),e.TgZ(23,"div",16)(24,"input",20),e.NdJ("keyup",function(){return n.validatePasswordModerate()})("ngModelChange",function(m){return n.password=m}),e.qZA(),e.TgZ(25,"label",21),e._uU(26,"Password"),e.qZA(),e.YNc(27,x,2,0,"span",19),e.qZA(),e.TgZ(28,"div",22)(29,"button",23),e._uU(30,"Login"),e.qZA()(),e.TgZ(31,"p",24),e._uU(32,"Don't have an account? "),e.TgZ(33,"a",25),e._uU(34,"Register here"),e.qZA()(),e.TgZ(35,"a",26),e._uU(36,"Terms of use."),e.qZA(),e.TgZ(37,"a",26),e._uU(38,"Privacy policy"),e.qZA()()()()()()()()()()),2&r){const i=e.MAs(11);e.xp6(22),e.Q6J("ngIf",n.notValid("username")),e.xp6(2),e.Q6J("ngModel",n.password),e.xp6(3),e.Q6J("ngIf",n.isValid),e.xp6(2),e.Q6J("disabled",i.invalid||n.isValid),e.xp6(4),e.Q6J("routerLink",e.DdM(5,T))}},dependencies:[d.O5,u.yS,a._Y,a.Fj,a.JJ,a.JL,a.wO,a.On,a.F],styles:['section[_ngcontent-%COMP%]{padding-top:3%}.fontawesomeicon[_ngcontent-%COMP%]:before{display:inline-block;text-rendering:auto;-webkit-font-smoothing:antialiased}.Dumbbell[_ngcontent-%COMP%]:before{font:var(--fa-font-solid);content:" \\f44b"}']}),t})();function A(t,o){1&t&&(e.TgZ(0,"span",29),e._uU(1," Invalid User "),e.qZA())}function k(t,o){1&t&&(e.TgZ(0,"span",29),e._uU(1," Invalid Name "),e.qZA())}function w(t,o){1&t&&(e.TgZ(0,"span",29),e._uU(1," Invalid Email "),e.qZA())}function q(t,o){1&t&&(e.TgZ(0,"span",29),e._uU(1," Invalid password "),e.qZA())}let I=(()=>{class t{constructor(r,n,i){this.fb=r,this.userService=n,this.route=i,this.myForm=this.fb.group({username:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(12)]],first_name:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(12)]],email:["",a.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")],password:["",a.kI.pattern("^(?=[^A-Z]*[A-Z])(?=[^a-z]*[a-z])(?=\\D*\\d)[A-Za-z\\d!$%@#\xa3\u20ac*?&]{8,}$")],rpassword:[""],check:[!1,a.kI.requiredTrue]})}ngOnInit(){}notValidField(r){return this.myForm.controls[r].errors&&this.myForm.controls[r].touched}passwordValidator(){return()=>{const r=this.myForm.get("password")?.value,n=this.myForm.get("repeat_password")?.value;return r!==n?{isValid:!1}:null}}save(){this.myForm.invalid?this.myForm.markAllAsTouched():this.userService.register(this.myForm?.controls.username.value,this.myForm?.controls.password.value,this.myForm?.controls.email.value,this.myForm?.controls.first_name.value).subscribe({next:r=>{c().fire("Good job!","You registed correctly!","success").then(n=>{n.isConfirmed&&this.route.navigate(["/"])})},error:r=>{this.myForm.reset({}),c().fire({icon:"error",title:"Oops...",text:"User already exist!"})}})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(a.qu),e.Y36(f.f),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:51,vars:5,consts:[[1,"vh-100","bg-image",2,"background-color","#111010"],[1,"mask","d-flex","align-items-center","gradient-custom-3"],[1,"container","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-12","col-md-9","col-lg-7","col-xl-6"],[1,"card",2,"border-radius","15px"],[1,"card-body","p-5"],[1,"text-uppercase","text-center","mb-5"],["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-outline","mb-4"],["for","form3Example1cg",1,"form-label"],["type","text","id","form3Example1cg","formControlName","username",1,"form-control","form-control-lg"],["class","form-text text-danger",4,"ngIf"],["for","form3Example2cg",1,"form-label"],["type","text","id","form3Example2cg","formControlName","first_name",1,"form-control","form-control-lg"],["for","form3Example3cg",1,"form-label"],["type","email","id","form3Example3cg","formControlName","email",1,"form-control","form-control-lg"],["for","form3Example4cg",1,"form-label"],["type","password","id","pass1","formControlName","password",1,"form-control","form-control-lg"],["id","pass2","formControlName","rpassword","type","password","placeholder","","for","form3Example4cg","required","",1,"form-control","form-control-lg"],["hidden","true","id","error"],[1,"form-check","d-flex","mb-5"],["type","checkbox","value","","formControlName","check","id","form2Example3cg",1,"form-check-input","me-2"],["for","form2Example3g",1,"form-check-label"],["href","#!",1,"text-body"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-dark","btn-block","btn-lg","gradient-custom-4"],[1,"text-center","text-muted","mt-5","mb-0"],["href","/login",1,"fw-bold","text-body"],[1,"form-text","text-danger"]],template:function(r,n){1&r&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),e._uU(8,"Create an account"),e.qZA(),e.TgZ(9,"form",8),e.NdJ("ngSubmit",function(){return n.save()}),e.TgZ(10,"div",9)(11,"label",10),e._uU(12,"Your Username"),e.qZA(),e._UZ(13,"input",11),e.YNc(14,A,2,0,"span",12),e.qZA(),e.TgZ(15,"div",9)(16,"label",13),e._uU(17,"Your First Name"),e.qZA(),e._UZ(18,"input",14),e.YNc(19,k,2,0,"span",12),e.qZA(),e.TgZ(20,"label",15),e._uU(21,"Your Email"),e.qZA(),e.TgZ(22,"div",9),e._UZ(23,"input",16),e.YNc(24,w,2,0,"span",12),e.qZA(),e.TgZ(25,"label",17),e._uU(26,"Password"),e.qZA(),e.TgZ(27,"div",9),e._UZ(28,"input",18),e.YNc(29,q,2,0,"span",12),e.qZA(),e.TgZ(30,"div",9)(31,"label",17),e._uU(32," Repeat Password"),e.qZA(),e._UZ(33,"input",19),e.TgZ(34,"span",20),e._uU(35,"La contrasena no coincide"),e.qZA()(),e.TgZ(36,"div",21),e._UZ(37,"input",22),e.TgZ(38,"label",23),e._uU(39," I agree all statements in "),e.TgZ(40,"a",24)(41,"u"),e._uU(42,"Terms of service"),e.qZA()()()(),e.TgZ(43,"div",25)(44,"button",26),e._uU(45,"Register"),e.qZA()(),e.TgZ(46,"p",27),e._uU(47," Have already an account? "),e.TgZ(48,"a",28)(49,"u"),e._uU(50,"Login here"),e.qZA()()()()()()()()()()()),2&r&&(e.xp6(9),e.Q6J("formGroup",n.myForm),e.xp6(5),e.Q6J("ngIf",n.notValidField("username")),e.xp6(5),e.Q6J("ngIf",n.notValidField("first_name")),e.xp6(5),e.Q6J("ngIf",n.notValidField("email")),e.xp6(5),e.Q6J("ngIf",n.notValidField("password")))},dependencies:[d.O5,a._Y,a.Fj,a.Wl,a.JJ,a.JL,a.Q7,a.sg,a.u],styles:["section[_ngcontent-%COMP%]{padding-top:3.3%}"]}),t})();var s=l(7155),p=l(6308),g=l(2778);function N(t,o){1&t&&(e.TgZ(0,"mat-header-cell",21),e._uU(1," Username "),e.qZA())}function M(t,o){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const r=o.$implicit;e.xp6(1),e.hij(" ",r.username," ")}}function F(t,o){1&t&&(e.TgZ(0,"mat-header-cell",21),e._uU(1," First Name "),e.qZA())}function S(t,o){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const r=o.$implicit;e.xp6(1),e.hij(" ",r.first_name," ")}}function Y(t,o){1&t&&(e.TgZ(0,"mat-header-cell",21),e._uU(1," email "),e.qZA())}function L(t,o){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const r=o.$implicit;e.xp6(1),e.hij(" ",r.email," ")}}function R(t,o){1&t&&(e.TgZ(0,"mat-header-cell",21),e._uU(1," role "),e.qZA())}function E(t,o){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const r=o.$implicit;e.xp6(1),e.hij(" ",r.role," ")}}function J(t,o){1&t&&e._UZ(0,"mat-header-cell")}function O(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"mat-cell")(1,"button",22),e.NdJ("click",function(){const m=e.CHM(r).$implicit,_=e.oxw();return e.KtG(_.delete(m.username))}),e._uU(2,"Delete"),e.qZA()()}}function B(t,o){1&t&&e._UZ(0,"mat-header-cell")}const V=function(t){return["/user/update",t]};function Q(t,o){if(1&t&&(e.TgZ(0,"mat-cell")(1,"a",3)(2,"button",23),e._uU(3,"Update"),e.qZA()()()),2&t){const r=o.$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(1,V,r.username))}}function P(t,o){1&t&&e._UZ(0,"mat-header-row")}function D(t,o){1&t&&e._UZ(0,"mat-row")}const j=function(){return["/user/add"]},z=function(){return[5,10,25]};let G=(()=>{class t{constructor(r){this.userService=r,this.articles=[],this.error=!0,this.displayedColumns=["username","name","email","role","button","button2"],this.filterValue=""}ngOnInit(){this.articleList()}applyFilter(){this.filterValue=this.filterValue.trimStart(),this.filterValue=this.filterValue.toLowerCase(),this.dataSource.filter=this.filterValue}articleList(){this.userService.userList().subscribe({next:r=>{this.dataSource=new s.by(r.content),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}})}delete(r){const n=c().mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});n.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(i=>{i.isConfirmed?(this.userService.deleteUser(r).subscribe({next:m=>{}}),n.fire("Deleted!","Your file has been deleted.","success").then(()=>{this.articleList()})):i.dismiss===c().DismissReason.cancel&&n.fire("Cancelled","Your file is safe :)","error")})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(f.f))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-list"]],viewQuery:function(r,n){if(1&r&&(e.Gf(g.NW,5),e.Gf(p.YE,5)),2&r){let i;e.iGM(i=e.CRH())&&(n.paginator=i.first),e.iGM(i=e.CRH())&&(n.sort=i.first)}},inputs:{filterValue:"filterValue"},decls:31,vars:8,consts:[[1,"container"],[1,"arriba"],[1,"boton"],[3,"routerLink"],["type","button",1,"btn","btn-success"],[1,"example-header"],["placeholder","Filter",3,"ngModel","keyup","ngModelChange"],[1,"example-container","mat-elevation-z8"],["matSort","",3,"dataSource"],["matColumnDef","username"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","email"],["matColumnDef","role"],["matColumnDef","button"],[4,"matHeaderCellDef"],["matColumnDef","button2"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-sort-header",""],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-warning"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"button",4),e._uU(5,"Add user"),e.qZA()()(),e.TgZ(6,"div",5)(7,"input",6),e.NdJ("keyup",function(){return n.applyFilter()})("ngModelChange",function(m){return n.filterValue=m}),e.qZA()()(),e.TgZ(8,"div",7)(9,"mat-table",8),e.ynx(10,9),e.YNc(11,N,2,0,"mat-header-cell",10),e.YNc(12,M,2,1,"mat-cell",11),e.BQk(),e.ynx(13,12),e.YNc(14,F,2,0,"mat-header-cell",10),e.YNc(15,S,2,1,"mat-cell",11),e.BQk(),e.ynx(16,13),e.YNc(17,Y,2,0,"mat-header-cell",10),e.YNc(18,L,2,1,"mat-cell",11),e.BQk(),e.ynx(19,14),e.YNc(20,R,2,0,"mat-header-cell",10),e.YNc(21,E,2,1,"mat-cell",11),e.BQk(),e.ynx(22,15),e.YNc(23,J,1,0,"mat-header-cell",16),e.YNc(24,O,3,0,"mat-cell",11),e.BQk(),e.ynx(25,17),e.YNc(26,B,1,0,"mat-header-cell",16),e.YNc(27,Q,4,3,"mat-cell",11),e.BQk(),e.YNc(28,P,1,0,"mat-header-row",18),e.YNc(29,D,1,0,"mat-row",19),e.qZA(),e._UZ(30,"mat-paginator",20),e.qZA()()),2&r&&(e.xp6(3),e.Q6J("routerLink",e.DdM(6,j)),e.xp6(4),e.Q6J("ngModel",n.filterValue),e.xp6(2),e.Q6J("dataSource",n.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(7,z)))},dependencies:[u.yS,a.Fj,a.JJ,a.On,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,g.NW,p.YE,p.nU],styles:[".arriba[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.boton[_ngcontent-%COMP%]{margin-bottom:5px}"]}),t})();var h=l(1816);function X(t,o){1&t&&(e.TgZ(0,"span",23),e._uU(1," Invalid User "),e.qZA())}function H(t,o){1&t&&(e.TgZ(0,"span",23),e._uU(1," Invalid Name "),e.qZA())}function $(t,o){1&t&&(e.TgZ(0,"span",23),e._uU(1," Invalid weight "),e.qZA())}function W(t,o){1&t&&(e.TgZ(0,"span",23),e._uU(1," Invalid Height "),e.qZA())}function K(t,o){1&t&&(e.TgZ(0,"label",24),e._uU(1,"Role"),e.qZA())}function ee(t,o){1&t&&(e.TgZ(0,"div",25)(1,"div",26),e._UZ(2,"input",27),e.TgZ(3,"label",28),e._uU(4," User "),e.qZA()(),e.TgZ(5,"div",26),e._UZ(6,"input",29),e.TgZ(7,"label",30),e._uU(8," Admin "),e.qZA()()())}function te(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"div",1)(1,"section",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"h2",9),e._uU(9,"Update Profile"),e.qZA(),e.TgZ(10,"form",10),e.NdJ("ngSubmit",function(){e.CHM(r);const i=e.oxw();return e.KtG(i.save())}),e.TgZ(11,"div",11)(12,"label",12),e._uU(13,"Username"),e.qZA(),e._UZ(14,"input",13),e.YNc(15,X,2,0,"span",14),e.qZA(),e.TgZ(16,"div",11)(17,"label",15),e._uU(18,"First Name"),e.qZA(),e._UZ(19,"input",16),e.YNc(20,H,2,0,"span",14),e.qZA(),e.TgZ(21,"div",11)(22,"label",12),e._uU(23,"Weight"),e.qZA(),e._UZ(24,"input",17),e.YNc(25,$,2,0,"span",14),e.qZA(),e.TgZ(26,"div",11)(27,"label",12),e._uU(28,"Height"),e.qZA(),e._UZ(29,"input",18),e.YNc(30,W,2,0,"span",14),e.qZA(),e.YNc(31,K,2,0,"label",19),e.YNc(32,ee,9,0,"div",20),e._UZ(33,"br"),e.TgZ(34,"div",21)(35,"button",22),e._uU(36,"Add User"),e.qZA()()()()()()()()()()()}if(2&t){const r=e.oxw();e.xp6(10),e.Q6J("formGroup",r.myForm),e.xp6(5),e.Q6J("ngIf",r.notValidField("username")),e.xp6(5),e.Q6J("ngIf",r.notValidField("first_name")),e.xp6(5),e.Q6J("ngIf",r.notValidField("peso")),e.xp6(5),e.Q6J("ngIf",r.notValidField("altura")),e.xp6(1),e.Q6J("ngIf",r.username!=r.token.sub),e.xp6(1),e.Q6J("ngIf",r.username!=r.token.sub)}}let re=(()=>{class t{constructor(r,n,i,m){this.fb=r,this.userService=n,this.activatedRoute=i,this.route=m,this.myForm=this.fb.group({username:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(12)]],first_name:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(12)]],altura:["",[a.kI.required,a.kI.min(.1)]],peso:["",[a.kI.required,a.kI.min(.1)]],role:["USER",a.kI.required]})}ngOnInit(){this.username=this.activatedRoute.snapshot.params.id,this.token=(0,h.Z)(localStorage.getItem("token")),this.userService.user(this.username).subscribe({next:r=>{this.myForm.setValue({username:r.username,first_name:r.first_name,peso:r.peso,altura:r.altura,role:r.role})}})}notValidField(r){return this.myForm.controls[r].errors&&this.myForm.controls[r].touched}save(){this.userService.updateUser(this.myForm?.controls.username.value,this.myForm.value).subscribe({next:r=>{c().fire("Great!","The user has been updated!","success").then(()=>{this.route.navigate(["/user"])})},error:r=>{c().fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(a.qu),e.Y36(f.f),e.Y36(u.gz),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-update"]],decls:1,vars:1,consts:[["class","mainContainer",4,"ngIf"],[1,"mainContainer"],[1,"vh-100","bg-image",2,"background-color","#111010"],[1,"mask","d-flex","align-items-center","gradient-custom-3"],[1,"container","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-12","col-md-9","col-lg-7","col-xl-6"],[1,"card",2,"border-radius","15px"],[1,"card-body","p-5"],[1,"text-uppercase","text-center","mb-5"],["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-outline","mb-4"],["for","form3Example1cg",1,"form-label"],["type","text","id","form3Example1cg","formControlName","username",1,"form-control","form-control-lg"],["class","form-text text-danger",4,"ngIf"],["for","form3Example2cg",1,"form-label"],["type","text","id","form3Example2cg","formControlName","first_name",1,"form-control","form-control-lg"],["type","number","id","form3Example1cg","step","0.01","formControlName","peso",1,"form-control","form-control-lg"],["type","number","id","form3Example1cg","step","0.01","formControlName","altura",1,"form-control","form-control-lg"],["class","col-sm-3 col-form-label",4,"ngIf"],["class","col-sm-9",4,"ngIf"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-dark","btn-block","btn-lg","gradient-custom-4"],[1,"form-text","text-danger"],[1,"col-sm-3","col-form-label"],[1,"col-sm-9"],[1,"form-check"],["type","radio","value","USER","id","radioUser","formControlName","role",1,"form-check-input"],["for","radioUser",1,"form-check-label"],["type","radio","value","ADMIN","id","radioAdmin","formControlName","role",1,"form-check-input"],["for","radioAdmin",1,"form-check-label"]],template:function(r,n){1&r&&e.YNc(0,te,37,7,"div",0),2&r&&e.Q6J("ngIf","USER"==n.token.role&&n.username==n.token.sub||n.token.role==n.token.role)},dependencies:[d.O5,a._Y,a.Fj,a.wV,a._,a.JJ,a.JL,a.sg,a.u],styles:[".container[_ngcontent-%COMP%]{padding-top:8%}@media (max-width: 992px){.container[_ngcontent-%COMP%]{padding-top:30%}}"]}),t})();function oe(t,o){1&t&&(e.TgZ(0,"span",28),e._uU(1," Invalid User "),e.qZA())}function ne(t,o){1&t&&(e.TgZ(0,"span",28),e._uU(1," Invalid Name "),e.qZA())}function ae(t,o){1&t&&(e.TgZ(0,"span",28),e._uU(1," Invalid Email "),e.qZA())}function ie(t,o){1&t&&(e.TgZ(0,"span",28),e._uU(1," Invalid password "),e.qZA())}let se=(()=>{class t{constructor(r,n,i){this.fb=r,this.userService=n,this.route=i,this.myForm=this.fb.group({username:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(12)]],first_name:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(12)]],email:["",a.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")],password:["",a.kI.pattern("^(?=[^A-Z]*[A-Z])(?=[^a-z]*[a-z])(?=\\D*\\d)[A-Za-z\\d!$%@#\xa3\u20ac*?&]{8,}$")],role:["USER",a.kI.required]})}ngOnInit(){}notValidField(r){return this.myForm.controls[r].errors&&this.myForm.controls[r].touched}save(){this.myForm.invalid?this.myForm.markAllAsTouched():this.userService.addUser(this.myForm.value).subscribe({next:r=>{c().fire("Good job!","You registed correctly!","success").then(n=>{n.isConfirmed&&this.route.navigate(["/"])})},error:r=>{c().fire({icon:"error",title:"Oops...",text:"User already exist!"})}})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(a.qu),e.Y36(f.f),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-users-add"]],decls:45,vars:5,consts:[[1,"vh-100","bg-image",2,"background-color","#111010"],[1,"mask","d-flex","align-items-center","gradient-custom-3"],[1,"container","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-12","col-md-9","col-lg-7","col-xl-6"],[1,"card",2,"border-radius","15px"],[1,"card-body","p-5"],[1,"text-uppercase","text-center","mb-5"],["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-outline","mb-4"],["for","form3Example1cg",1,"form-label"],["type","text","id","form3Example1cg","formControlName","username",1,"form-control","form-control-lg"],["class","form-text text-danger",4,"ngIf"],["for","form3Example2cg",1,"form-label"],["type","text","id","form3Example2cg","formControlName","first_name",1,"form-control","form-control-lg"],["for","form3Example3cg",1,"form-label"],["type","email","id","form3Example3cg","formControlName","email",1,"form-control","form-control-lg"],["for","form3Example4cg",1,"form-label"],["type","password","id","pass1","formControlName","password",1,"form-control","form-control-lg"],[1,"col-sm-3","col-form-label"],[1,"col-sm-9"],[1,"form-check"],["type","radio","value","USER","id","radioUser","formControlName","role",1,"form-check-input"],["for","radioUser",1,"form-check-label"],["type","radio","value","ADMIN","id","radioAdmin","formControlName","role",1,"form-check-input"],["for","radioAdmin",1,"form-check-label"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-dark","btn-block","btn-lg","gradient-custom-4"],[1,"form-text","text-danger"]],template:function(r,n){1&r&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),e._uU(8,"Create an account"),e.qZA(),e.TgZ(9,"form",8),e.NdJ("ngSubmit",function(){return n.save()}),e.TgZ(10,"div",9)(11,"label",10),e._uU(12,"Username"),e.qZA(),e._UZ(13,"input",11),e.YNc(14,oe,2,0,"span",12),e.qZA(),e.TgZ(15,"div",9)(16,"label",13),e._uU(17,"First Name"),e.qZA(),e._UZ(18,"input",14),e.YNc(19,ne,2,0,"span",12),e.qZA(),e.TgZ(20,"label",15),e._uU(21,"Email"),e.qZA(),e.TgZ(22,"div",9),e._UZ(23,"input",16),e.YNc(24,ae,2,0,"span",12),e.qZA(),e.TgZ(25,"label",17),e._uU(26,"Password"),e.qZA(),e.TgZ(27,"div",9),e._UZ(28,"input",18),e.YNc(29,ie,2,0,"span",12),e.qZA(),e.TgZ(30,"label",19),e._uU(31,"Role"),e.qZA(),e.TgZ(32,"div",20)(33,"div",21),e._UZ(34,"input",22),e.TgZ(35,"label",23),e._uU(36," User "),e.qZA()(),e.TgZ(37,"div",21),e._UZ(38,"input",24),e.TgZ(39,"label",25),e._uU(40," Admin "),e.qZA()()(),e._UZ(41,"br"),e.TgZ(42,"div",26)(43,"button",27),e._uU(44,"Add User"),e.qZA()()()()()()()()()()),2&r&&(e.xp6(9),e.Q6J("formGroup",n.myForm),e.xp6(5),e.Q6J("ngIf",n.notValidField("username")),e.xp6(5),e.Q6J("ngIf",n.notValidField("first_name")),e.xp6(5),e.Q6J("ngIf",n.notValidField("email")),e.xp6(5),e.Q6J("ngIf",n.notValidField("password")))},dependencies:[d.O5,a._Y,a.Fj,a._,a.JJ,a.JL,a.sg,a.u]}),t})();var le=l(58);function me(t,o){1&t&&(e.TgZ(0,"mat-header-cell",41),e._uU(1," service "),e.qZA())}function ce(t,o){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const r=o.$implicit;e.xp6(1),e.hij(" ",r.service.name," ")}}function de(t,o){1&t&&(e.TgZ(0,"mat-header-cell",41),e._uU(1," Fecha inicio "),e.qZA())}function ue(t,o){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&t){const r=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,r.start_date,"dd/MM/yyyy")," ")}}function pe(t,o){1&t&&(e.TgZ(0,"mat-header-cell",41),e._uU(1," Fecha final "),e.qZA())}function fe(t,o){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&t){const r=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,r.end_date,"dd/MM/yyyy")," ")}}function ge(t,o){1&t&&(e.TgZ(0,"mat-header-cell",41),e._uU(1," active "),e.qZA())}function _e(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"Activo"),e.qZA())}function be(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"Caducado"),e.qZA())}function he(t,o){if(1&t&&(e.TgZ(0,"mat-cell"),e.YNc(1,_e,2,0,"p",42),e.YNc(2,be,2,0,"p",42),e.qZA()),2&t){const r=o.$implicit;e.xp6(1),e.Q6J("ngIf",r.active),e.xp6(1),e.Q6J("ngIf",!r.active)}}function ve(t,o){1&t&&e._UZ(0,"mat-header-cell")}function Ze(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(r);const i=e.oxw().$implicit,m=e.oxw(2);return e.KtG(m.updateServicePurchased(i.service.id,i.active))}),e._uU(1," Cancel "),e.qZA()}}function ye(t,o){if(1&t&&(e.TgZ(0,"mat-cell"),e.YNc(1,Ze,2,0,"button",43),e.qZA()),2&t){const r=o.$implicit;e.xp6(1),e.Q6J("ngIf",r.active)}}function Ue(t,o){1&t&&e._UZ(0,"mat-header-row")}function xe(t,o){1&t&&e._UZ(0,"mat-row")}const Te=function(t){return["/user/update",t]},Ce=function(t,o,r,n,i,m){return{debajo:t,saludable:o,sobrepeso:r,obesidad1:n,obesidad2:i,obesidad3:m}},Ae=function(){return[3]};function ke(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),e._UZ(6,"img",7),e.TgZ(7,"h5",8),e._uU(8),e.qZA(),e.TgZ(9,"div",9)(10,"a",10)(11,"button",11),e._uU(12,"Edit"),e.qZA()()()()()(),e.TgZ(13,"div",12)(14,"div",5)(15,"div",13)(16,"div",3)(17,"div",14)(18,"p",15),e._uU(19,"First Name"),e.qZA()(),e.TgZ(20,"div",16)(21,"p",17),e._uU(22),e.qZA()()(),e._UZ(23,"hr"),e.TgZ(24,"div",3)(25,"div",14)(26,"p",15),e._uU(27,"Email"),e.qZA()(),e.TgZ(28,"div",16)(29,"p",17),e._uU(30),e.qZA()()(),e._UZ(31,"hr"),e.TgZ(32,"div",3)(33,"div",14)(34,"p",15),e._uU(35,"Role"),e.qZA()(),e.TgZ(36,"div",16)(37,"p",17),e._uU(38),e.qZA()()()()(),e.TgZ(39,"div",3)(40,"div",18)(41,"div",19)(42,"div",13)(43,"p",20)(44,"span",21),e._uU(45,"IMC"),e.qZA(),e._uU(46,"Calculo "),e.qZA()(),e.TgZ(47,"div",18)(48,"div",22),e._UZ(49,"div",23),e.qZA(),e._UZ(50,"br"),e.TgZ(51,"p"),e._uU(52),e.qZA()()()()(),e._UZ(53,"br"),e.TgZ(54,"div",3)(55,"div",24)(56,"div",25)(57,"div",26)(58,"input",27),e.NdJ("keyup",function(){e.CHM(r);const i=e.oxw();return e.KtG(i.applyFilter())})("ngModelChange",function(i){e.CHM(r);const m=e.oxw();return e.KtG(m.filterValue=i)}),e.qZA()()(),e.TgZ(59,"div",28)(60,"mat-table",29),e.ynx(61,30),e.YNc(62,me,2,0,"mat-header-cell",31),e.YNc(63,ce,2,1,"mat-cell",32),e.BQk(),e.ynx(64,33),e.YNc(65,de,2,0,"mat-header-cell",31),e.YNc(66,ue,3,4,"mat-cell",32),e.BQk(),e.ynx(67,34),e.YNc(68,pe,2,0,"mat-header-cell",31),e.YNc(69,fe,3,4,"mat-cell",32),e.BQk(),e.ynx(70,35),e.YNc(71,ge,2,0,"mat-header-cell",31),e.YNc(72,he,3,2,"mat-cell",32),e.BQk(),e.ynx(73,36),e.YNc(74,ve,1,0,"mat-header-cell",37),e.YNc(75,ye,2,1,"mat-cell",32),e.BQk(),e.YNc(76,Ue,1,0,"mat-header-row",38),e.YNc(77,xe,1,0,"mat-row",39),e.qZA(),e._UZ(78,"mat-paginator",40),e.qZA()()()()()()()}if(2&t){const r=e.oxw();e.xp6(8),e.Oqu(r.user.username),e.xp6(2),e.Q6J("routerLink",e.VKq(15,Te,r.user.username)),e.xp6(12),e.Oqu(r.user.first_name),e.xp6(8),e.Oqu(r.user.email),e.xp6(8),e.Oqu(r.user.role),e.xp6(11),e.Udp("width",r.porcent,"%"),e.Q6J("ngClass",e.HTZ(17,Ce,r.debajo,r.saludable,r.sobrepeso,r.obesidad1,r.obesidad2,r.obesidad3)),e.xp6(3),e.AsE("Tu imc es de ",r.redondeo(r.user.imc),". ",r.consejo,""),e.xp6(6),e.Q6J("ngModel",r.filterValue),e.xp6(2),e.Q6J("dataSource",r.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",r.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",r.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(24,Ae))}}const we=[{path:"login",component:C},{path:"register",component:I},{path:"userList",component:G},{path:"add",component:se},{path:"update/:id",component:re},{path:"",component:(()=>{class t{constructor(r,n){this.userService=r,this.service=n,this.debajo=!1,this.saludable=!1,this.sobrepeso=!1,this.obesidad1=!1,this.obesidad2=!1,this.obesidad3=!1,this.porcent=0,this.consejo="",this.displayedColumns=["service","start_date","end_date","active","button"],this.filterValue=""}ngOnInit(){this.token=(0,h.Z)(localStorage.getItem("token")),this.userService.user(this.token.sub).subscribe({next:r=>{this.user=r,this.getPorcent(this.user.imc),this.checkImc(),this.getConsejo(this.redondeo(this.user.imc)),this.articleList()}})}getPorcent(r){this.porcent=r/40*100}redondeo(r){const n=Math.pow(10,2);return Math.round(r*n)/n}getConsejo(r){this.userService.getConsejo(r).subscribe({next:n=>{this.consejo=n.texto}})}checkImc(){this.user.imc<18?this.debajo=!0:this.user.imc>=18.5&&this.user.imc<24.9?this.saludable=!0:this.user.imc>=24.9&&this.user.imc<29.9?this.sobrepeso=!0:this.user.imc>=29.9&&this.user.imc<34.9?this.obesidad1=!0:this.user.imc>=34.9&&this.user.imc<=40?this.obesidad2=!0:this.user.imc>40&&(this.obesidad3=!0)}applyFilter(){this.filterValue=this.filterValue.trimStart(),this.filterValue=this.filterValue.toLowerCase(),this.dataSource.filter=this.filterValue}articleList(){this.service.getServicePurchasedByUser(this.user.username).subscribe({next:r=>{this.dataSource=new s.by(r),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}})}updateServicePurchased(r,n){const i=c().mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});i.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(m=>{m.isConfirmed?(this.service.putServicePurchasedByUser(this.user.username,r,n).subscribe({next:_=>{}}),i.fire("Deleted!","Your file has been deleted.","success").then(()=>{this.articleList()})):m.dismiss===c().DismissReason.cancel&&i.fire("Cancelled","Your file is safe :)","error")})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(f.f),e.Y36(le.m))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-users"]],viewQuery:function(r,n){if(1&r&&(e.Gf(g.NW,5),e.Gf(p.YE,5)),2&r){let i;e.iGM(i=e.CRH())&&(n.paginator=i.first),e.iGM(i=e.CRH())&&(n.sort=i.first)}},inputs:{filterValue:"filterValue"},decls:1,vars:1,consts:[["style","background-color: #111010;",4,"ngIf"],[2,"background-color","#111010"],[1,"container","py-5"],[1,"row"],[1,"col-lg-4"],[1,"card","mb-4"],[1,"card-body","text-center"],["src","https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3.webp","alt","avatar",1,"rounded-circle","img-fluid",2,"width","150px"],[1,"my-3"],[1,"d-flex","justify-content-center","mb-2"],[3,"routerLink"],["type","button",1,"btn","btn-primary"],[1,"col-lg-8"],[1,"card-body"],[1,"col-sm-3"],[1,"mb-0"],[1,"col-sm-9"],[1,"text-muted","mb-0"],[1,"col-md-12"],[1,"card","mb-4","mb-md-0"],[1,"mb-4"],[1,"text-primary","font-italic","me-1"],[1,"progress-bar"],[1,"progress",3,"ngClass"],[1,"container"],[1,"arriba"],[1,"example-header"],["placeholder","Filter",3,"ngModel","keyup","ngModelChange"],[1,"example-container","mat-elevation-z8"],["matSort","",3,"dataSource"],["matColumnDef","service"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","start_date"],["matColumnDef","end_date"],["matColumnDef","active"],["matColumnDef","button"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-sort-header",""],[4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-danger",3,"click"]],template:function(r,n){1&r&&e.YNc(0,ke,79,25,"section",0),2&r&&e.Q6J("ngIf",n.user)},dependencies:[d.mk,d.O5,u.yS,a.Fj,a.JJ,a.On,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,g.NW,p.YE,p.nU,d.uU],styles:[".progress-bar[_ngcontent-%COMP%]{width:100%;height:20px;background-color:#e0e0e0;border-radius:4px}.progress[_ngcontent-%COMP%]{height:100%;border-radius:4px}.debajo[_ngcontent-%COMP%]{background-color:#0ff}.saludable[_ngcontent-%COMP%]{background-color:#4caf50}.sobrepeso[_ngcontent-%COMP%]{background-color:orange}.obesidad1[_ngcontent-%COMP%]{background-color:red}.obesidad2[_ngcontent-%COMP%]{background-color:#b603b6}.obesidad3[_ngcontent-%COMP%]{background-color:#8a2be2}"]}),t})()}];let qe=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(we),u.Bz]}),t})();var Ie=l(3546),Ne=l(9549),Me=l(4333),v=l(3238);let Se=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[d.ez,v.BQ],v.BQ]}),t})(),Ye=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.ez,qe,a.u5,Ie.QW,s.p0,Ne.lN,g.TU,p.JX,Me.JX,a.UX,Se]}),t})()}}]);